<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>L·ªãch h·∫πn ƒë√£ h·ªßy - Punky Spa</title>
    {% load static %}
  <link rel="stylesheet" href="{% static 'lichhen/style.css' %}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>

<body>
<div class="container">
  <!-- üîπ Sidebar -->
  <aside class="sidebar">
    <div class="logo">
      <img src="{% static 'trangchu/logo.png' %}" alt="Punky Spa">
      <h2><span class="pink">Punky</span> Spa</h2>
    </div>

    <div class="user-info">
      <i class="fa fa-user"></i>{{ request.user.username }}
    </div>

    <nav>
      <a href="{% url 'home' %}">Trang ch·ªß</a>
      <div class="dropdown-content">
        <a href="{% url 'lich_hen_sap_toi' %}">L·ªãch h·∫πn s·∫Øp t·ªõi</a>
        <a href="{% url 'lich_su_lich_hen' %}">L·ªãch s·ª≠ l·ªãch h·∫πn</a>
        <a href="{% url 'lich_da_huy' %}" class="active">L·ªãch ƒë√£ h·ªßy</a>
      </div>
    </nav>
  </aside>

  <!-- üî∏ Main content -->
  <div class="main-content">
    <div class="header-row">
      <h2 style="color:#ff5c8d;"> L·ªãch h·∫πn ƒë√£ h·ªßy</h2>
    </div>

    <table class="schedule-table">
      <thead>
        <tr>
          <th>Th·ªùi gian</th>
          <th>T√™n kh√°ch h√†ng</th>
          <th>SƒêT</th>
          <th>T√™n th√∫ c∆∞ng</th>
          <th>Lo√†i</th>
          <th>D·ªãch v·ª•</th>
          <th>Nh√¢n vi√™n</th>
          <th>L√Ω do h·ªßy</th>
        </tr>
      </thead>

      <tbody>
        {# ‚úÖ D√πng ƒë√∫ng bi·∫øn 'lich_hens' nh∆∞ view tr·∫£ v·ªÅ, kh√¥ng ph·∫£i 'lich_hen' #}
        {% for lh in lich_hens %}
        <tr>
          <!-- üïí Th·ªùi gian hi·ªÉn th·ªã theo ƒë·ªãnh d·∫°ng gi·ªù - ng√†y/th√°ng/nƒÉm -->
          <td>{{ lh.thoi_gian|date:"H:i d/m/Y" }}</td>

          <!-- üë§ T√™n kh√°ch h√†ng -->
          <td>{{ lh.khach_hang.ho_ten }}</td>

          <!-- ‚òéÔ∏è S·ªë ƒëi·ªán tho·∫°i (thu·ªôc model LichHen, kh√¥ng ph·∫£i KhachHang) -->
          <td>{{ lh.so_dien_thoai }}</td>

          <!-- üêæ T√™n & lo√†i th√∫ c∆∞ng -->
          <td>{{ lh.thu_cung.ten_thucung }}</td>
          <td>{{ lh.thu_cung.loai }}</td>

          <!-- üíÖ D·ªãch v·ª• s·ª≠ d·ª•ng (qua b·∫£ng trung gian DV_LichHen) -->
          <td>
            {% for dv in lh.dv_lichhen_set.all %}
              {{ dv.dich_vu.ten_dich_vu }}{% if not forloop.last %}, {% endif %}
            {% endfor %}
          </td>

          <!-- üë©‚Äçüíº Nh√¢n vi√™n ph·ª• tr√°ch (n·∫øu c√≥) -->
          <td>{{ lh.nhan_vien.user.get_full_name|default:"-" }}</td>

          <!-- üìù Ghi ch√∫ ho·∫∑c l√Ω do h·ªßy -->
          <td>{{ lh.ly_do_huy|default:"Kh√¥ng c√≥" }}</td>
        </tr>

        {% empty %}
        <!-- ‚ö†Ô∏è Hi·ªán th√¥ng b√°o n·∫øu danh s√°ch r·ªóng -->
        <tr><td colspan="8">Kh√¥ng c√≥ l·ªãch h·∫πn b·ªã h·ªßy.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
</body>
</html>
