<!DOCTYPE html>
{% load static %}
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Punky Spa</title>

    <!-- ğŸŒ¸ LiÃªn káº¿t CSS -->
    <link rel="stylesheet" href="{% static 'trangchu/style.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>

<body>

    <!-- ğŸŒ¸ THANH TRÃŠN CÃ™NG -->
    <div class="topbar">
        <div class="topbar-left">
            <i class="fa fa-calendar"></i>
            <strong>Giá» lÃ m viá»‡c:</strong> Tá»« 09h00 Ä‘áº¿n 21h00
        </div>

        <div class="topbar-right">
            <span class="notify-icon">ğŸ””</span>

            {% if user.is_authenticated %}
            <div class="user-menu">
                <button class="user-btn">
                    <i class="fa fa-user"></i> {{ user.username }}
                    <i class="fa fa-caret-down"></i>
                </button>
                <div class="dropdown-menu">
                    <a href="{% url 'thongtintaikhoan' %}"><i class="fa fa-user-circle"></i> TÃ i khoáº£n</a>
                    <a href="#"><i class="fa fa-star"></i> TÃ­ch Ä‘iá»ƒm</a>
                    <a href="#"><i class="fa fa-ticket"></i> MÃ£ Æ°u Ä‘Ã£i</a>
                    <a href="#"><i class="fa fa-calendar"></i> Lá»‹ch háº¹n</a>
                    <a href="#"><i class="fa fa-comments"></i> Khiáº¿u náº¡i</a>
                    <a href="{% url 'dangxuat' %}"><i class="fa fa-sign-out-alt"></i> ÄÄƒng xuáº¥t</a>
                    <a href="#"><i class="fa fa-trash"></i> XÃ³a tÃ i khoáº£n</a>
                </div>
            </div>
            {% else %}
            <a href="{% url 'dangnhap' %}"><i class="fa fa-user"></i> ÄÄƒng nháº­p</a> |
            <a href="{% url 'dangky' %}"><i class="fa fa-pen"></i> ÄÄƒng kÃ½</a>
            {% endif %}
        </div>
    </div>

    <!-- ğŸŒ¸ HEADER CHÃNH -->
    <header class="navbar">
        <div class="logo">
            <img src="{% static 'trangchu/logo.png' %}" alt="Logo Punky Spa">
            <h1><span class="pink">Punky</span> Spa</h1>
        </div>

        <nav>
            <a href="{% url 'home' %}" class="active">Trang chá»§</a>
            <a href="#">Dá»‹ch vá»¥</a>
            <a href="#">Khuyáº¿n mÃ£i</a>
        </nav>

        <div class="search">
            <input type="text" placeholder="TÃ¬m kiáº¿m...">
            <button>ğŸ”</button>
        </div>
    </header>

    <!-- ğŸŒ¸ BANNER -->
    <section class="banner-full">
        <img src="{% static 'trangchu/banner.png' %}" alt="Banner Punky Spa">
    </section>

    <!-- ğŸŒ¸ GIá»šI THIá»†U -->
    <section class="intro">
        <h2>Giá»›i thiá»‡u</h2>
        <div class="gallery">
            <img src="{% static 'trangchu/cat1.png' %}" alt="">
            <img src="{% static 'trangchu/cat2.png' %}" alt="">
            <img src="{% static 'trangchu/cat3.png' %}" alt="">
        </div>
    </section>

    {% block content %}{% endblock %}

    <!-- ğŸŒ¸ FOOTER -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-column">
                <h4>LiÃªn láº¡c</h4>
                <p>Hotline: 1900 6750</p>
                <p>Äá»‹a chá»‰: 627 NgÃ´ Quyá»n, An Háº£i Báº¯c,<br>ÄÃ  Náºµng, Viá»‡t Nam</p>
            </div>

            <div class="footer-column">
                <h4>ChÃ­nh sÃ¡ch</h4>
                <p>ChÃ­nh sÃ¡ch báº£o máº­t</p>
                <p>Quy Ä‘á»‹nh sá»­ dá»¥ng</p>
            </div>

            <div class="footer-column">
                <h4>Tá»•ng Ä‘Ã i há»— trá»£</h4>
                <p>TÆ° váº¥n dá»‹ch vá»¥: 1800 6750</p>
                <p>Há»— trá»£ sá»­ dá»¥ng: 1900 6750</p>
                <p>Email: punkyspa@gmail.vn</p>
                <p>Tá»« 7h00 â€“ 20h00 cÃ¡c ngÃ y tá»« thá»© 2 Ä‘áº¿n Chá»§ nháº­t.</p>
            </div>
        </div>
    </footer>

    <!-- ğŸŒ¸ NÃºt gá»i vÃ  Chat -->
    <div class="floating-icons">
        <a href="tel:19006750" class="phone-icon" title="Gá»i ngay Punky Spa">
            <i class="fa fa-phone"></i>
        </a>
        <div class="chat-icon" id="chatToggle">
            <img src="{% static 'trangchu/logo.png' %}" alt="Chat Punky Spa">
        </div>
    </div>

    <!-- ğŸŒ¸ Chatbox -->
    <div class="chatbox" id="chatBox">
        <div class="chat-header">
            <img src="{% static 'trangchu/logo.png' %}" alt="Logo">
            <h4>Punky Spa há»— trá»£ ğŸ¾</h4>
            <span id="closeChat">âœ–</span>
        </div>

        <div class="chat-body" id="chatBody">
            <div class="message bot">
                Xin chÃ o ğŸ‘‹, chÃ o má»«ng báº¡n Ä‘Ã£ Ä‘áº¿n vá»›i <b>Punky Spa</b>!
                Báº¡n cáº§n Ä‘Æ°á»£c há»— trá»£ vá» dá»‹ch vá»¥ nÃ o áº¡?
                <div class="options">
                    <button onclick="sendOption('BÃ¡o giÃ¡ dá»‹ch vá»¥')">BÃ¡o giÃ¡ dá»‹ch vá»¥</button>
                    <button onclick="sendOption('Há»i Ä‘Ã¡p nhanh (FAQ)')">Há»i Ä‘Ã¡p nhanh</button>
                    <button onclick="sendOption('TÆ° váº¥n trá»±c tiáº¿p')">TÆ° váº¥n trá»±c tiáº¿p</button>
                </div>
            </div>
        </div>

        <!-- ğŸŒ¸ Ã” nháº­p tin nháº¯n -->
        <div class="chat-input-area">
            <input type="text" id="chat-input" placeholder="Nháº­p tin nháº¯n cá»§a báº¡n..." />
            <button id="chat-send"><i class="fa fa-paper-plane"></i></button>
        </div>
    </div>

    <!-- ğŸŒ¸ SCRIPT -->
    <script>
    const chatToggle = document.getElementById("chatToggle");
    const chatBox = document.getElementById("chatBox");
    const closeChat = document.getElementById("closeChat");
    const chatBody = document.getElementById("chatBody");
    const chatInput = document.getElementById("chat-input");
    const chatSend = document.getElementById("chat-send");

    chatToggle.addEventListener("click", () => chatBox.style.display = "block");
    closeChat.addEventListener("click", () => chatBox.style.display = "none");

    // ğŸ“¨ Gá»­i tin nháº¯n
    chatSend.addEventListener("click", sendMessage);
    chatInput.addEventListener("keypress", e => {
        if (e.key === "Enter") sendMessage();
    });

    function sendMessage() {
        const text = chatInput.value.trim();
        if (!text) return;
        appendMessage(text, "user");
        chatInput.value = "";
        setTimeout(() => appendMessage(getBotReply(text), "bot"), 700);
    }

    function appendMessage(content, sender) {
        const msg = document.createElement("div");
        msg.className = `message ${sender}`;
        msg.innerHTML = content;
        chatBody.appendChild(msg);
        chatBody.scrollTop = chatBody.scrollHeight;
    }

    function sendOption(option) {
        appendMessage(option, "user");
        setTimeout(() => appendMessage(autoReply(option), "bot"), 600);
    }

    function autoReply(option) {
        if (option === "BÃ¡o giÃ¡ dá»‹ch vá»¥") {
            return "Báº¡n muá»‘n xem bÃ¡o giÃ¡ cho dá»‹ch vá»¥ nÃ o?<div class='options'>\
                <button onclick='sendOption(\"Táº¯m rá»­a\")'>Táº¯m rá»­a</button>\
                <button onclick='sendOption(\"Cáº¯t tá»‰a lÃ´ng\")'>Cáº¯t tá»‰a lÃ´ng</button>\
                <button onclick='sendOption(\"Nhuá»™m\")'>Nhuá»™m</button>\
                <button onclick='sendOption(\"TiÃªm phÃ²ng\")'>TiÃªm phÃ²ng</button>\
                <button onclick='sendOption(\"Triá»‡t sáº£n\")'>Triá»‡t sáº£n</button></div>";
        }
        if (option === "Há»i Ä‘Ã¡p nhanh (FAQ)") {
            return "Báº¡n cÃ³ thá»ƒ há»i tÃ´i nhá»¯ng cÃ¢u nhÆ°:<br>\
            ğŸ‘‰ 'CÃ³ nháº­n spa cho mÃ¨o khÃ´ng?'<br>\
            ğŸ‘‰ 'Táº¯m cho chÃ³ giÃ¡ bao nhiÃªu?'<br>\
            ğŸ‘‰ 'CÃ³ nháº­n khÃ¡ch ngoÃ i giá» khÃ´ng?' ğŸ’•";
        }
        if (option === "TÆ° váº¥n trá»±c tiáº¿p") {
            return "Báº¡n cÃ³ thá»ƒ gá»i ngay <b>1900 6750</b> Ä‘á»ƒ Ä‘Æ°á»£c nhÃ¢n viÃªn há»— trá»£ ğŸ“";
        }
        return "Cáº£m Æ¡n báº¡n Ä‘Ã£ quan tÃ¢m Ä‘áº¿n Punky Spa ğŸ’–";
    }

    function getBotReply(text) {
        text = text.toLowerCase();
        if (text.includes("táº¯m") && text.includes("giÃ¡")) return "Táº¯m rá»­a cÃ³ giÃ¡ tá»« <b>150.000Ä‘ - 300.000Ä‘</b> tuá»³ loáº¡i ğŸ¶ğŸ±";
        if (text.includes("mÃ¨o")) return "Dáº¡ cÃ³ áº¡ ğŸ’• Punky Spa phá»¥c vá»¥ cáº£ chÃ³ vÃ  mÃ¨o ğŸ˜º";
        if (text.includes("ngoÃ i giá»")) return "Spa má»Ÿ cá»­a 9h00 - 21h00. NgoÃ i giá» báº¡n cÃ³ thá»ƒ Ä‘áº·t lá»‹ch trÆ°á»›c nhÃ© ğŸ’•";
        if (text.includes("cáº¯t") || text.includes("lÃ´ng")) return "Cáº¯t tá»‰a lÃ´ng giÃ¡ khoáº£ng <b>200.000Ä‘ - 400.000Ä‘</b> ğŸ©";
        return "Cáº£m Æ¡n báº¡n Ä‘Ã£ liÃªn há»‡ ğŸ’—! Báº¡n chá» má»™t chÃºt shop sáº½ pháº£n há»“i ngay nhÃ©";
    }
    </script>

</body>
</html>
